<!doctype html>
<!-- https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment -->
<html>
	<head>
		<meta charset="utf-8" />
		<title>Test Object</title>
		<script>
// "use strict";
function onLoad()
{
	let
		o1,
		o2,
		foo,
		bar;

	if(window.console && console.log) {
		try
		{
			o1 = { p1: "property1 value before Object.freeze()" };
			console.log("%o", o1);
			Object.freeze(o1);
			o1.p1 = "property1 value after Object.freeze()";
			console.log("%o", o1);
		}
		catch (e)
		{
			console.log("\"strict mode:\" %o", e);
		}

		o1 = null;
		o1 = { p1: "property1 value", ...(o1 || {}) };
		o1 = { p2: "property2 value", ...(o1 || {}) };
		o1 = { p3: "property3 value", ...(o1 || {}) };
		console.log("%o", o1);

		o1 = { id: 1 };
		console.log("object.hasOwnProperty(\"id\") = ", o1.hasOwnProperty("id"));
		console.log("object.hasOwnProperty(\"hasOwnProperty\") = ", o1.hasOwnProperty("hasOwnProperty"));

		console.log("1. Using Spread");
		o1 = { pString1: "o1.pString1" };
		o2 = { ...o1 };
		console.log("o2 = { ...o1 } => o1=%o o2=%o", o1, o2);
		o2 = { ...o1, pString2: "o2.pString2" };
		console.log("o1=%o o2=%o", o1, o2);
		o2.pString1 = "o2.pString1";
		console.log("o1.pString1=\"%s\" o2.pString1=\"%s\"", o1.pString1, o2.pString1);
		o1.pString1 = "o1.pString1 (updated)";
		console.log("o1.pString1=\"%s\" o2.pString1=\"%s\"", o1.pString1, o2.pString1);
		console.log("o1=%o o2=%o", o1, o2);
		
		console.log("2. Using Object.assign");
		o1 = { pString1: "o1.pString1" };
		o2 = Object.assign({}, o1);
		console.log("o1=%o o2=%o", o1, o2);
		o2.pString1 = "o2.pString1";
		console.log("o1.pString1=\"%s\" o2.pString1=\"%s\"", o1.pString1, o2.pString1);
		o1.pString1 = "o1.pString1 (updated)";
		console.log("o1.pString1=\"%s\" o2.pString1=\"%s\"", o1.pString1, o2.pString1);
		console.log("o1=%o o2=%o", o1, o2);

		console.log("3. Using JSON");
		o1 = { pString1: "o1.pString1" };
		o2 = JSON.parse(JSON.stringify(o1));
		console.log("o1=%o o2=%o", o1, o2);
		o2.pString1 = "o2.pString1";
		console.log("o1.pString1=\"%s\" o2.pString1=\"%s\"", o1.pString1, o2.pString1);
		o1.pString1 = "o1.pString1 (updated)";
		console.log("o1.pString1=\"%s\" o2.pString1=\"%s\"", o1.pString1, o2.pString1);
		console.log("o1=%o o2=%o", o1, o2);
		
		o1 = { 1: '1st', 2: '2nd', 3: '3rd' }[2];
		console.log("%s", o1);

		o1 = { p1: '1st', p2: '2nd', p3: '3rd' };
		o2 = { p1: 'p1',  p2: 'p2',  p3: 'p3', p4: 'p4', p5: 'p5', ...o1 };
		console.log("%o", o2);
		
		o1 = {p: 42, q: true};
		const {p: foo, q: bar} = o1;
		console.log("foo=%o bar=%o", foo, bar);
		
		console.log("%o", createNewObject());
		console.log("%o", createNewObject({p1: "p1"}));
		console.log("%o", createNewObject({p1: "p1", p2: "p2"}));
		console.log("%o", createNewObject({p1: "p1", p2: "p2", p3: "p3"}));
		
		o1 = { p1: "p1", p3: "p3" };
		o2 = {
			...!!o1.p1 && { p1: o1.p1 },
			...!!o1.p2 && { p2: o1.p2 },
			...!!o1.p3 && { p3: o1.p3 },
			...!!o1.p4 && { p4: o1.p4 }
		};
		
		console.log("%o %o", o1, o2);
		
		let target = { p1: "p1t", p2: "p2t"};
		let source = { p2: "p2s", p3: "p3s"};
		let returnedTarget = Object.assign(target, source);
		console.log("target %o returnedTarget %o source %o", target, returnedTarget, source);
		target.p2 = "new p2t";
		console.log("target %o returnedTarget %o source %o", target, returnedTarget, source);
		
		source = { p1: "p1s", p2: "p2s" };
		target = Object.create(source);
		console.log("target %o source %o", target, source);
		target.p1 = "new p1t";
		console.log("target %o source %o", target, source);
	}
}

function createNewObject(controlledValues) {
	return {
		id: "id",
		p1: "1st",
		p2: "2nd",
		p3: "3rd",
		p4: "4th",
		p5: "5th",
		...controlledValues
	};
}
		</script>
	</head>
	<body onload="onLoad()">
	</body>
</html>
