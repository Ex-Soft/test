<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" >
<html>
  <head>
    <title>Test vars in IFrames</title>
    <script type="text/javascript" src="func.js"></script>
<script type=text/javascript>
<!--
var
  SelfFrameNo=0,
  SelfFrameName=1,
  AnotherFrameNo=1,
  AnotherFrameName=2,
  aVar="aVar in IFrame# "+SelfFrameName;

ShowVariable();

alert("From IFrame# "+SelfFrameName);

var
  FrameVar;

function makeObjectTable(name, object)
{
   document.writeln("<H2>" + name + "</H2>");
   document.writeln("<TABLE BORDER=1>\n" +
                    "  <TR><TH>Field<TH>Value");
   for(field in object)
   {
      if(field=="makeObjectTable")
        continue;
      document.writeln("  <TR><TD>" + field + "<TD>" + object[field]);
   }
   
   document.writeln("</TABLE");
}

function SetMainVar()
{
   var
     tmp=top;

   top.MainFormVar=document.getElementById("MainVarSet").value;
   //top.document.getElementById("MainVarGet").value=document.getElementById("MainVarSet").value;
   //parent.document.getElementById("MainVarGet").value=document.getElementById("MainVarSet").value;
   tmp.document.getElementById("MainVarGet").value=document.getElementById("MainVarSet").value;
}

function GetMainVar()
{
   document.getElementById("MainVarGet").value=top.MainFormVar;
}

function SetSelfVar()
{
   FrameVar=document.getElementById("SelfVarSet").value;
}

function GetSelfVar()
{
   document.getElementById("SelfVarGet").value=FrameVar;
}

function SetOtherFrameVar()
{
   top.frames[AnotherFrameNo].FrameVar=document.getElementById("OtherFrameVarSet").value;
   parent.document.getElementById("IFrame"+AnotherFrameName).contentWindow.document.getElementById("SelfVarGet").value=document.getElementById("OtherFrameVarSet").value;
   //parent.frames[AnotherFrameNo].document.getElementById("SelfVarGet").value=document.getElementById("OtherFrameVarSet").value;
}

function GetOtherFrameVar()
{
   document.getElementById("OtherFrameVarGet").value=top.frames[AnotherFrameNo].FrameVar;
}

function ShowFrameVar()
{
   alert("Frame#"+SelfFrameName+" ShowFrameVar(): FrameVar="+FrameVar);
}
// -->
</script>
  </head>
  <body>
    <h1>Test vars in IFrames</h1>
    <h2>IFrame# 1</h2>
    <hr>
<script type=text/javascript>
<!--
document.writeln("<h3>parent</h3>");
if(parent.id!=null)
  document.writeln(parent.id);
else
  document.writeln("parent.id==null");
document.writeln("<br>");

if(parent.id!=undefined)
  document.writeln(parent.id);
else
  document.writeln("parent.id==undefined");
document.writeln("<br>");

if(parent.name!=null)
  document.writeln("parent.name!=null");
else
  document.writeln("parent.name==null");
document.writeln("<br>");

if(parent.name!=undefined)
  document.writeln("parent.name!=undefined");
else
  document.writeln("parent.name==undefined");
document.writeln("<br>");

document.writeln("parent.name=\""+parent.name+"\"");
document.writeln("<br>");

makeObjectTable("parent",parent);
document.writeln("<br>");

if(parent.MainFormVar!=null)
  document.writeln("parent.MainFormVar!=null");
else
  document.writeln("parent.MainFormVar==null");
document.writeln("<br>");

if(parent.MainFormVar!=undefined)
  document.writeln("parent.MainFormVar!=undefined");
else
  document.writeln("parent.MainFormVar==undefined");
document.writeln("<br>");

if(parent.frames!=null)
  document.writeln("parent.frames!=null");
else
  document.writeln("parent.frames==null");
document.writeln("<br>");

if(parent.frames!=undefined)
  document.writeln("parent.frames!=undefined");
else
  document.writeln("parent.frames==undefined");
document.writeln("<br>");

document.writeln("parent.frames.length=");
document.writeln(parent.frames.length);
document.writeln("<br>");

for(var i=0; i<parent.frames.length; ++i)
{
   document.writeln("parent.frames[");
   document.writeln(i);
   document.writeln("].id=");
   document.writeln(parent.frames[i].id);
   document.writeln("&nbsp;");
   document.writeln("parent.frames[");
   document.writeln(i);
   document.writeln("].name=");
   document.writeln(parent.frames[i].name);
   document.writeln("<br>");
}

document.writeln("<hr>");

document.writeln("<h3>top</h3>");
if(top.id!=null)
  document.writeln(top.id);
else
  document.writeln("top.id==null");
document.writeln("<br>");

if(top.id!=undefined)
  document.writeln(top.id);
else
  document.writeln("top.id==undefined");
document.writeln("<br>");

if(top.name!=null)
  document.writeln("top.name!=null");
else
  document.writeln("top.name==null");
document.writeln("<br>");

if(top.name!=undefined)
  document.writeln("top.name!=undefined");
else
  document.writeln("top.name==undefined");
document.writeln("<br>");

document.writeln("top.name=\""+top.name+"\"");
document.writeln("<br>");

if(top.MainFormVar!=null)
  document.writeln("top.MainFormVar!=null");
else
  document.writeln("top.MainFormVar==null");
document.writeln("<br>");

if(top.MainFormVar!=undefined)
  document.writeln("top.MainFormVar!=undefined");
else
  document.writeln("top.MainFormVar==undefined");
document.writeln("<br>");

if(top.frames!=null)
  document.writeln("top.frames!=null");
else
  document.writeln("top.frames==null");
document.writeln("<br>");

if(top.frames!=undefined)
  document.writeln("top.frames!=undefined");
else
  document.writeln("top.frames==undefined");
document.writeln("<br>");

document.writeln("top.frames.length=");
document.writeln(top.frames.length);
document.writeln("<br>");

for(var i=0; i<top.frames.length; ++i)
{
   document.writeln("top.frames[");
   document.writeln(i);
   document.writeln("].id=");
   document.writeln(top.frames[i].id);
   document.writeln("&nbsp;");
   document.writeln("top.frames[");
   document.writeln(i);
   document.writeln("].name=");
   document.writeln(top.frames[i].name);
   document.writeln("<br>");
}
document.writeln("<hr>");
// -->
</script>
    <form>
      <input id="MainVarSet" type="text">&nbsp;<input id="MainVarButtSet" type="button" value="Set MainVar" onclick="SetMainVar();"><br>
      <input id="MainVarGet" type="text" readonly>&nbsp;<input id="MainVarButtGet" type="button" value="Get MainVar" onclick="GetMainVar();"><br>
      <input id="SelfVarSet" type="text">&nbsp;<input id="SelfVarButtSet" type="button" value="Set SelfVar" onclick="SetSelfVar();"><br>
      <input id="SelfVarGet" type="text" readonly>&nbsp;<input id="SelfVarButtGet" type="button" value="Get SelfVar" onclick="GetSelfVar();"><br>
      <input id="OtherFrameVarSet" type="text">&nbsp;<input id="OtherFrameVarButtSet" type="button" value="Set OtherFrameVar" onclick="SetOtherFrameVar();"><br>
      <input id="OtherFrameVarGet" type="text" readonly>&nbsp;<input id="OtherFrameVarButtGet" type="button" value="Get OtherFrameVar" onclick="GetOtherFrameVar();"><br>
      <input id="CallShowMainFormVarButt" type="button" value="Call parent.ShowMainFormVar()" onclick="top.ShowMainFormVar();"><br>
      <input id="CallSelfShowFrameVarButt" type="button" value="Call ShowFrameVar()" onclick="ShowFrameVar();"><br>
      <input id="CallOtherFrameShowFrameVarButt" type="button" value="Call OtherFrame.ShowFrameVar()" onclick="top.frames[1].ShowFrameVar();"><br>
      <input id="CallOtherFrameShowFrameVarButtReal" type="button" value="Call OtherFrame.ShowFrameVar() (real)" onclick="var frm=top.document.getElementById('IFrame2'); if(frm) frm.contentWindow.ShowFrameVar();"><br>
      <iframe id="IFrame11" name="IFrame11" src="iframe11.html" width="100%" height="100%"></iframe>
    </form>
  </body>
</html>
