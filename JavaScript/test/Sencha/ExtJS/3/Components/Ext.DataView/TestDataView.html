<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="ru">
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
		<title>&laquo;Test DataView&raquo;</title>
		<link rel="stylesheet" type="text/css" href="../../../../../ExtJS/resources/css/ext-all.css"/>
		<script type="text/javascript" charset="windows-1251" src="../../../../../ExtJS/adapter/ext/ext-base-debug.js"></script>
		<script type="text/javascript" charset="windows-1251" src="../../../../../ExtJS/ext-all-debug.js"></script>

		<style type="text/css">
.DivWithName
{
	color: yellow;
	background-color: red;
}

.DivWithImg
{
	float: right;
	background-color: aqua;
}

.SpanWithName
{
	color: white;
	background-color: blue;
}

		</style>
		<script type="text/javascript">
<!--
Ext.BLANK_IMAGE_URL="../../../../../ExtJS/resources/images/default/s.gif";

Ext.onReady(function() {
	Ext.QuickTips.init();

	var
		store = new Ext.data.ArrayStore({
			autoDestroy: true,
			idIndex: 0,
			fields: [
				{ name: "id", type: "int" },
				"name"
			],
			data: [
				[ 1, "Иванов Иван Иванович" ],
				[ 2, "Петров Петр Петрови" ],
				[ 3, "Сидоров Сидор Сидорович" ],
				[ 4, "Васильев Василий Василиевич" ]
			]
		}),
		XTemplateTitlePage = new Ext.XTemplate(
			"<tpl for=\".\">",
				"<div class=\"DivWithName\">",
					"<div class=\"DivWithImg\"><img src=\"../../../../pix/sm10_eyes.gif\" /></div>",
					"<span class=\"SpanWithName\">{name}</span>",
				"</div>",
			"</tpl>",
			"<div class=\"x-clear\"></div>"
		),
		DataViewTitlePage = new Ext.DataView({
			singleSelect: true,
			store: store,
			tpl: XTemplateTitlePage,
			autoHeight: true,
			multiSelect: true,
			itemSelector: "div.DivWithName",
			//renderTo: Ext.get("div2")
			applyTo: Ext.get("div2"),
			listeners: {
				click: function(dw, index, node, e){
					if(dw)
					{
						var
							si=dw.getSelectedIndexes(),
							sn=dw.getSelectedNodes(),
							sr=dw.getSelectedRecords(),
							sc=dw.getSelectionCount();
					}

					if(Ext.isGecko && window.console)
						console.log("DataView.click(...,index=%i,...)", index);

					if(node)
					{
						var
							r=dw.getRecord(node);

						if(r)
						{
							if(Ext.isGecko && window.console)
								console.log("Id=%i Name=\"%s\"", r.id, r.get("name"));
						}
					}
				},
				containerclick: function(dw, e){
					if(Ext.isGecko && window.console)
						console.log("DataView.containerclick");
						
					if(dw)
					{
						var
							si=dw.getSelectedIndexes(),
							sn=dw.getSelectedNodes(),
							sr=dw.getSelectedRecords(),
							sc=dw.getSelectionCount();
					}
				},
				dblclick: function(dw, index, node, e){
					if(Ext.isGecko && window.console)
						console.log("DataView.dblclick(...,index=%i,...)", index);
						
					if(node)
					{
						var
							r=dw.getRecord(node);

						if(r)
						{
							if(Ext.isGecko && window.console)
								console.log("Id=%i Name=\"%s\"", r.id, r.get("name"));
						}
					}
				},
				selectionchange: function(dw, selections){
					if(Ext.isGecko && window.console)
						console.log("DataView.selectionchange");
						
					if(selections)
					{
						Ext.each(selections, function(item){
							var
								r=dw.getRecord(item);

							if(r)
							{
								if(Ext.isGecko && window.console)
									console.log("Id=%i Name=\"%s\"", r.id, r.get("name"));
							}
						});
					}
				},
				render: function(dw){
					dw.select(0);
				}
			}
		});
});
// -->
		</script>
	</head>
	<body>
		<div id="div1">DIV# 1</div>
		<div id="div2"></div>
		<div id="div3">DIV# 3</div>
	</body>
</html>